<!-- <app-side-nav></app-side-nav> -->


<div class="avd-container">

    <agm-map [(latitude)]="latitude" [(longitude)]="longitude" [(zoom)]="zoom" (mapReady)="mapReading()" [styles]="style"
        [zoomControl]="false">
        <agm-marker [(latitude)]="latitude" [(longitude)]="longitude" [markerDraggable]="true" >
        </agm-marker>
        <!-- <agm-marker *ngFor="let trips of allActiveTrips; let i = index;" [(latitude)]="allTripsDestinationLat[i]"
         [(longitude)]="allTripsDestinationLong[i]" [markerDraggable]="false" >
        </agm-marker> -->
        <agm-marker *ngFor="let loc of driverLocation; let i = index;" [(latitude)]="driverLocationsLat[i]"
        [(longitude)]="driverLocationsLong[i]" [markerDraggable]="false" >
       </agm-marker>
        <agm-marker [(latitude)]="latitude" [(longitude)]="longitude" [markerDraggable]="false"
            [animation]="userLocationMarkerAnimation" *ngIf="gettingDrivers"></agm-marker>

        <agm-circle [latitude]="latitude" [longitude]="longitude" [(radius)]="circleRadius" [fillColor]="'#ff1744'"
            [circleDraggable]="false" [editable]="false" *ngIf="gettingDrivers"></agm-circle>


        <agm-direction [origin]="origin" [destination]="destination" [renderOptions]="renderOptions"></agm-direction>

    </agm-map>
    <form id="search-form" *ngIf="showForm" >
        <input *ngIf="!riderLink" type="text" name="destinationAddress"  id="" class="destination" placeholder="Where are you going?" 
            matGoogleMapsAutocomplete   (onAutocompleteSelected)="onAutocompleteSelected($event)"
            (onLocationSelected)="onLocationSelected($event)"/>

    </form>
    <form class="destination-container " *ngIf="!reachableDrivers ">
        <mat-card *ngIf="!riderLink ">
            <div *ngIf="gettingDrivers ">
                    <p class="search" >Please hold on while we search for drivers near you</p>
                    <mat-spinner   [diameter]="30"
                    class="loader"
                  ></mat-spinner>
            </div>

            <mat-card-content *ngIf="!gettingDrivers && !showNoTripMessage">
                <mat-form-field class="auth-full-width">
                    <input type="text" matInput class="input-color search" placeholder="Your current location" autocorrect="off"
                        autocapitalize="off" spellcheck="off" #search name="currentLocation"  [ngModel]="currentLocation"
                        matGoogleMapsAutocomplete (onAutocompleteSelected)="storeUserCurrentLocation($event)">

                </mat-form-field>
                <!-- <p><a href="">Forgot password?</a></p> -->
                <button (click)='getDrivers()' mat-raised-button color="accent"
                    class="auth-full-width login-text">Search
                    <i class="material-icons right">send</i>
                </button>
                </mat-card-content>
        </mat-card>
        <mat-card class="example-card" *ngIf="riderLink ">
                <mat-card-content>
                <app-riderlink></app-riderlink>
                </mat-card-content>
                </mat-card>
    </form>
</div>



<app-availabledrivers *ngIf="availableTrips"></app-availabledrivers>
<app-notification></app-notification>

